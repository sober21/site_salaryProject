{% extends 'base.html' %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Посчитать и добавить</title>

</head>
<body>
{% block content %}

<!--<div><h1>{{ d[0] }}({{ workplace.lower() }}, {{ d[1].lower() }})</h1></div>-->
<!--{% if form %}-->
<!--<h3>form = {{ form }}</h3>-->
<!--{% endif %}-->
<!--{{ us }}-->
{% if workplace=='Упаковка' %}
<div class="box">
<div class="div-for-form">
<form class="salary" action="" method="post">
    <label class="label-dash" for="uhours">Часы:</label>
    <input type="number" id="uhours" name="hours" min="0" max="12" placeholder="Количество отработанных часов" >
    <label class="label-dash" for="order_name">Заказ:</label>
    <input type="text" name="order_name" id="order_name" placeholder="Название заказа">
    <label class="label-dash" for="upositions">Запаковано:</label>
    <input type="number" name="positions" id="upositions" min="0" placeholder="Количество запакованных позиций" required>
    <input type="date" name="date" value="{{ cur_date }}" max="{{ cur_date }}">
    <input type="submit" name="optional" value="Добавить заказ">
    <input type="submit" value="Весь день">
</form>
</div></div>

{% endif %}
{% if workplace in ['1 отдел', '3 отдел'] %}
<div class="box">
<div class="div-for-form">
<form class="salary" action="" method="post">
    <label class="label-dash" for="hours">Часы:</label>
    <input type="number" id="hours" name="hours" min="1" max="12" placeholder="Количество отработанных часов" >
    <label class="label-dash" for="positions">Отбор:</label>
    <input type="number" name="positions" id="positions" min="1" placeholder="Количество отобранных позиций" required>
    <label class="label-dash" for="incoming_positions">Приход:</label>
    <input type="number" name="incoming_positions" id="incoming_positions" min="0" placeholder="Количество принятых позиций" required>
    <label class="label-dash" for="mens">Количество человек:</label>
    <input type="number" name="mens" id="mens" min="1" value="3" placeholder="Количество работавших людей" required>
    <input type="date" name="date" value="{{ cur_date }}" min="2023-01-01" max="{{ cur_date }}">
    <input type="submit" name="optional" value="Добавить заказ">
    <input type="submit" value="Весь день">

</form>
</div></div>
{% endif %}
<div class="box"></div>
<div>
<h3 style="text-align: center">{{ year }} год</h3>
<table>
<tr>
{% if workplace == 'Упаковка' %}
<td><form method="post">
    <input type="submit" name="last_day" value="<<">
    <input type="submit" name="get_day" value="{{ us }}">
    <input type="submit" name="next_day" value=">>">
</form></td>
{% endif %}
<td><form method="post">
    <input type="submit" name="last_week" value="<<">
    <input type="submit" name="get_week" value="Эта неделя">
    <input type="submit" name="next_week" value=">>">
</form></td>
<td><form method="post">
    <input type="submit" name="last_month" value="<<">
    <input type="submit" name="get_month" value="{{ month }}">
    <input type="submit" name="next_month" value=">>">
</form></td>
</tr>
</table>
</div>
<div>
<table>
    {% if sal_data %}

    <!--    Таблица для 1 и 3 отделов-->

    {% if workplace in ['1 отдел', '3 отдел'] %}
    <tr>
        <th class="st">Дата</th>
        <th class="st">Часы</th>
        <th class="st">Отбор</th>
        <th class="st">Приход</th>
        <th class="st">Сумма</th>
    </tr>
    {% for i in sal_data %}
    <tr>
        <td>{{ i[0] }}</td>
        <td>{{ i[1] }}</td>
        <td>{{ i[2] }}</td>
        <td>{{ i[3] }}</td>
        <td>{{ i[4] }}</td>
    </tr>

    {% endfor %}
    <tr>
        <th>Всего</th>
        {% for i in sum %}
        <th>{{ i[0] }}</th>
        <th>{{ i[1] }}</th>
        <th>{{ i[2] }}</th>
        <th>{{ i[3] }}</th>
        {% endfor %}
    </tr>

    {% endif %}

<!--    Таблица для упаковки-->
    {% if workplace == 'Упаковка' %}
    <tr>
        <th>Дата</th>
        <th>Часы</th>
        <th>Упаковано</th>
        <th>Сумма</th>
    </tr>
    {% for i in sal_data %}
    <tr>
        <td>{{ i[0] }}</td>
        <td>{{ i[1] }}</td>
        <td>{{ i[2] }}</td>
        <td>{{ i[3] }}</td>
    </tr>

    {% endfor %}
    <tr>
        <th>Всего</th>
        {% for i in sum %}
        <th>{{ i[0] }}</th>
        <th>{{ i[1] }}</th>
        <th>{{ i[2] }}</th>
        {% endfor %}
    </tr>

    {% endif %}
    {% endif %}
</table>
{% if workplace=='Упаковка' %}
    {% if orders %}
    <table>
        <tr>
            <th>Заказ</th>
            <th>Позиции</th>
        </tr>
        {% for order in orders %}
        <tr>
            <td>{{ order[2] }}</td>
            <td>{{ order[1] }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
{% endif %}
</div>
{% if sal_today %}
{{sal_today}}
{% endif %}
{% endblock content %}
</body>
</html>